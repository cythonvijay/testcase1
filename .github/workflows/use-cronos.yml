name: CRONOS Dual Mode Analysis

on:
  push:
    branches: [ main, master ]

  pull_request:
    branches: [ main, master ]

jobs:

  cronos-boundary:
    name: CRONOS Boundary Mode
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: Run CRONOS (BOUNDARY)
        uses: cythonvijay/cronos-action@main
        with:
          api_url: ${{ secrets.CRONOS_API_URL }}
          mode: BOUNDARY

      - name: Upload Boundary Reports
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: cronos-boundary-reports
          path: cronos-reports/


  cronos-strict:
    name: CRONOS Strict Mode
    runs-on: ubuntu-latest
    needs: cronos-boundary

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: Run CRONOS (STRICT)
        uses: cythonvijay/cronos-action@main
        with:
          api_url: ${{ secrets.CRONOS_API_URL }}
          mode: STRICT

      - name: Upload Strict Reports
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: cronos-strict-reports
          path: cronos-reports/
